webpackJsonp([8],{35:function(e,t,n){(function(e){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=d["default"].pending(),n=document.createElement("div"),a=l["default"].createElement(m,i({node:n,resolver:t},e));return document.body.appendChild(n),u["default"].render(a,n),t.promise};var r=n(1),l=a(r),o=n(22),u=a(o),s=n(48),d=a(s),c=n(58),f=a(c),m=l["default"].createClass({displayName:"ConfirmDialog",propTypes:{title:l["default"].PropTypes.node.isRequired,content:l["default"].PropTypes.node.isRequired,icon:l["default"].PropTypes.string,approveCaption:l["default"].PropTypes.string,rejectCaption:l["default"].PropTypes.string,checkboxCaption:l["default"].PropTypes.node},getDefaultProps:function(){return{approveCaption:"Yes",rejectCaption:"No"}},getInitialState:function(){return{checked:!1}},componentDidMount:function(){var t={movePopup:!1,onHidden:this.onHidden,onApprove:this.onApprove,onDeny:this.onDeny,closable:!1,detachable:!1,allowMultiple:!0},n=u["default"].findDOMNode(this);e(n).modal(t).modal("show")},onDeny:function(e){this.props.resolver.reject(new Error("Denied"))},onApprove:function(e){this.props.resolver.resolve(this.state.checked)},onHidden:function(){this.props.node&&(u["default"].unmountComponentAtNode(this.props.node),document.body.removeChild(this.props.node))},onCheckboxValueChanged:function(e){this.setState({checked:e})},render:function(){return l["default"].createElement("div",{className:"ui basic modal confirm-dialog"},l["default"].createElement("div",{className:"header"},this.props.title),l["default"].createElement("div",{className:"image content"},l["default"].createElement("div",{className:"image"},l["default"].createElement("i",{className:this.props.icon+" icon"})),l["default"].createElement("div",{className:"description"},this.props.content,this.props.checkboxCaption?l["default"].createElement(f["default"],{checked:!1,onChange:this.onCheckboxValueChanged,caption:this.props.checkboxCaption}):null)),l["default"].createElement("div",{className:"actions"},l["default"].createElement("div",{className:"two fluid ui inverted buttons"},l["default"].createElement("div",{className:"ui cancel red basic inverted button"},l["default"].createElement("i",{className:"remove icon"}),this.props.rejectCaption),l["default"].createElement("div",{className:"ui ok green basic inverted button"},l["default"].createElement("i",{className:"checkmark icon"}),this.props.approveCaption))))}})}).call(t,n(21))},240:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.QueueActions=void 0;var i=n(3),r=a(i),l=n(60),o=a(l),u=n(6),s=a(u),d=n(18),c=a(d),f=n(5),m=a(f),p=n(35),h=a(p),E=n(25),v=a(E),y=function(e){return e.status.failed},_=t.QueueActions=r["default"].createActions([{searchBundle:{asyncResult:!0,access:m["default"].QUEUE_EDIT,displayName:"Search for alternates",icon:c["default"].SEARCH}},{setBundlePriority:{asyncResult:!0,displayName:"Set priority"}},{removeBundle:{asyncResult:!0,children:["confirmed"],displayName:"Remove",access:m["default"].QUEUE_EDIT,icon:c["default"].REMOVE}},{removeFinished:{asyncResult:!0,access:m["default"].QUEUE_EDIT,displayName:"Remove finished bundles",icon:c["default"].REMOVE}},{pause:{asyncResult:!0,displayName:"Pause all",access:m["default"].QUEUE_EDIT,icon:c["default"].PAUSE}},{resume:{asyncResult:!0,displayName:"Resume all",access:m["default"].QUEUE_EDIT,icon:c["default"].PLAY}},{rescan:{asyncResult:!0,displayName:"Rescan for errors",access:m["default"].QUEUE_EDIT,icon:c["default"].REFRESH,filter:y}},{forceShare:{asyncResult:!0,displayName:"Force in share",access:m["default"].QUEUE_EDIT,icon:c["default"].ERROR,filter:y}}]),C=function(e,t){return s["default"].post(o["default"].BUNDLES_URL+"/priority",{priority:e}).then(function(){return t.completed()})["catch"](function(e){return t.failed(e)})},N=function(e,t,n){return s["default"].post(o["default"].BUNDLE_URL+"/"+e.id+"/share",{skip_scan:t}).then(function(){return n.completed(e)})["catch"](function(t){return n.failed(t,e)})};_.setBundlePriority.listen(function(e,t){var n=this;return s["default"].patch(o["default"].BUNDLE_URL+"/"+e,{priority:t}).then(n.completed)["catch"](n.failed)}),_.pause.listen(function(){C(l.PriorityEnum.PAUSED_FORCED,_.pause)}),_.resume.listen(function(){C(l.PriorityEnum.DEFAULT,_.pause)}),_.rescan.listen(function(e){N(e,!1,_.rescan)}),_.forceShare.listen(function(e){N(e,!0,_.forceShare)}),_.removeFinished.listen(function(){var e=this;return s["default"].post(o["default"].BUNDLES_URL+"/remove_finished").then(e.completed)["catch"](e.failed)}),_.removeFinished.completed.listen(function(e){v["default"].error({title:"Action completed",message:e.count>0?e.count+" bundles were removed":"No bundles were removed"})}),_.removeBundle.shouldEmit=function(e){var t=this;if(e.status.id>=l.StatusEnum.FINISHED)this.confirmed(e,!1);else{var n={title:this.displayName,content:"Are you sure that you want to remove the bundle "+e.name+"?",icon:this.icon,approveCaption:"Remove bundle",rejectCaption:"Don't remove",checkboxCaption:"Remove finished files"};(0,h["default"])(n).then(function(n){return t.confirmed(e,n)})}return!1},_.removeBundle.confirmed.listen(function(e,t){var n=this;return s["default"].post(o["default"].BUNDLE_URL+"/"+e.id+"/remove",{remove_finished:t}).then(n.completed)["catch"](this.failed)}),_.searchBundle.listen(function(e){var t=this;return s["default"].post(o["default"].BUNDLE_URL+"/"+e.id+"/search").then(t.completed)["catch"](this.failed)}),t["default"]=_},466:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=a(i),l=function(e){var t=e.className,n=e.percent,a=e.caption;return r["default"].createElement("div",{className:"ui progress "+t,"data-percent":n},r["default"].createElement("div",{className:"bar",style:{width:n+"%"}},r["default"].createElement("div",{className:"progress"})),r["default"].createElement("div",{className:"label"},a))};l.propTypes={percent:r["default"].PropTypes.number.isRequired,caption:r["default"].PropTypes.node.isRequired},t["default"]=l},493:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=a(i),l=n(60),o=n(240),u=a(o),s=n(254),d=a(s),c=n(159),f=a(c),m=n(253),p=a(m),h=n(5),E=a(h),v=n(9),y=a(v),_=r["default"].createClass({displayName:"PriorityMenu",propTypes:{itemPrio:r["default"].PropTypes.object.isRequired,item:r["default"].PropTypes.object.isRequired},setPriority:function(e){u["default"].setBundlePriority(this.props.item.id,e.id)},shouldComponentUpdate:function(e,t){return e.item.priority.id!==this.props.item.priority.id},getPriorityListItem:function(e){var t=this;return r["default"].createElement(f["default"],{key:e.id,active:this.props.item.priority.id===e.id,onClick:function(){return t.setPriority(e)}},e.str)},render:function(){var e=this,t=this.props.itemPrio.str;return y["default"].hasAccess(E["default"].QUEUE_EDIT)?r["default"].createElement(d["default"],{caption:t,className:"priority-menu"},Object.keys(l.PriorityEnum.properties).map(function(t){return e.getPriorityListItem(l.PriorityEnum.properties[t])})):r["default"].createElement(p["default"],{caption:t})}});t["default"]=_},494:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),l=a(r),o=n(52),u=n(4),s=a(u),d=n(60),c=n(240),f=a(c),m=n(70),p=a(m),h=n(493),E=a(h),v=n(466),y=a(v),_=n(587),C=a(_),N=n(30),D=n(69);n(809);var b=function(e,t){var n=e.id;return(0,s["default"])({grey:n==d.StatusEnum.QUEUED&&0==t.speed},{blue:n==d.StatusEnum.QUEUED&&t.speed>0},{success:n>=d.StatusEnum.FINISHED},{error:e.failed})},P=function(e){var t=e.cellData,n=e.rowData;i(e,["cellData","rowData"]);return l["default"].createElement(y["default"],{className:b(t,n),caption:t.str,percent:100*n.downloaded_bytes/n.size})},R=function(e){var t=e.cellData,n=e.rowData;i(e,["cellData","rowData"]);return l["default"].createElement(E["default"],{itemPrio:t,item:n})},U=l["default"].createClass({displayName:"Queue",isActive:function(e,t){return t.status.id<d.StatusEnum.DOWNLOADED},isFinished:function(e,t){return!this.isActive(e,t)},isRunning:function(e,t){return t.speed>0},render:function(){return l["default"].createElement(p["default"],{store:C["default"],footerData:l["default"].createElement(N.ActionMenu,{className:"top left pointing",caption:"Actions...",actions:f["default"],header:"Queue actions",triggerIcon:"chevron up",ids:["removeFinished","divider","resume","pause"],button:!0})},l["default"].createElement(o.Column,{name:"Name",width:200,flexGrow:4,columnKey:"name",cell:l["default"].createElement(D.FileActionCell,{actions:f["default"],ids:["searchBundle","removeBundle","rescan","forceShare"]})}),l["default"].createElement(o.Column,{name:"Size",width:60,columnKey:"size",cell:l["default"].createElement(D.SizeCell,null),flexGrow:1}),l["default"].createElement(o.Column,{name:"Type/content",width:150,columnKey:"type",hideWidth:1e3}),l["default"].createElement(o.Column,{name:"Status",width:120,flexGrow:3,columnKey:"status",cell:l["default"].createElement(P,null)}),l["default"].createElement(o.Column,{name:"Sources",width:60,columnKey:"sources",renderCondition:this.isActive,flexGrow:1}),l["default"].createElement(o.Column,{name:"Time left",width:50,columnKey:"seconds_left",renderCondition:this.isRunning,cell:l["default"].createElement(D.AbbreviatedDurationCell,null)}),l["default"].createElement(o.Column,{name:"Speed",width:50,columnKey:"speed",cell:l["default"].createElement(D.SpeedCell,null),renderCondition:this.isRunning,flexGrow:1}),l["default"].createElement(o.Column,{name:"Priority",width:70,columnKey:"priority",renderCondition:this.isActive,cell:l["default"].createElement(R,null),flexGrow:1}),l["default"].createElement(o.Column,{name:"Added",width:100,columnKey:"time_added",cell:l["default"].createElement(D.DurationCell,null),hideWidth:1400}),l["default"].createElement(o.Column,{name:"Finished",width:100,columnKey:"time_finished",cell:l["default"].createElement(D.DurationCell,null),renderCondition:this.isFinished,hideWidth:1200}))}});t["default"]=U},587:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=a(i),l=n(60),o=a(l),u=n(72),s=a(u);t["default"]=r["default"].createStore({_viewName:"bundle_view",_apiUrl:o["default"].MODULE_URL,mixins:[(0,s["default"])("name")]})},606:function(e,t,n){t=e.exports=n(10)(),t.push([e.id,".ui.progress .bar{height:5px}",""])},809:[830,606]});
//# sourceMappingURL=queue.chunk.js.map