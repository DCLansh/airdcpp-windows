webpackJsonp([21],{266:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=a(u),i=n(19),c=a(i),d=n(14),l=a(d),r=n(97),s=o["default"].createClass({displayName:"ProtocolPage",mixins:[(0,l["default"])("form")],convertValue:function(e){return e+"_"+this.props.protocol},onFieldSetting:function(e,t,n,a){var u=n[this.convertValue("connection_mode")]!==r.ConnectionModeEnum.INCOMING_DISABLED,o=n[this.convertValue("connection_auto")];u&&!o||0!==e.indexOf("connection_ip")&&0!==e.indexOf("connection_bind")&&0!==e.indexOf("connection_update_ip")&&0!==e.indexOf("connection_ip_override")||(t.disabled=!0),o&&0===e.indexOf("connection_mode")&&u&&(t.disabled=!0),u||0!==e.indexOf("connection_auto")||(t.disabled=!0)},render:function(){return o["default"].createElement("div",{className:"detection-settings"},o["default"].createElement(c["default"],{ref:"form",formItems:this.props.formItems,onFieldSetting:this.onFieldSetting}))}});t["default"]=s},474:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="connectivity/v0";t["default"]={MODULE_URL:n,DETECT_URL:n+"/detect",STATUS_URL:n+"/status",CONNECTIVITY_MESSAGE:"connectivity_message",CONNECTIVITY_STARTED:"connectivity_started",CONNECTIVITY_FINISHED:"connectivity_finished"}},509:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=a(o),c=n(6),d=a(c),l=n(63),r=a(l),s=n(33),f=a(s),_=n(16),m=a(_),v=n(474),p=a(v),E=n(5),N=a(E),g=n(9),S=a(g),h=function(e){var t=e.text;return t+=e.auto_detect?" (auto detected)":" (manual configuration)"},I=function(e){var t=e.title,n=e.status,a=e.running;e.detect;return i["default"].createElement("div",{className:"ui row"},i["default"].createElement("div",{className:"five wide column header"},i["default"].createElement("div",{className:"ui tiny header"},t)),i["default"].createElement("div",{className:"eleven wide column"},a?"Detecting...":h(n)))},y=i["default"].createClass({displayName:"DetectPanel",mixins:[(0,r["default"])()],onSocketConnected:function(e){var t=p["default"].MODULE_URL;e(t,p["default"].CONNECTIVITY_STARTED,this.onDetectStarted),e(t,p["default"].CONNECTIVITY_FINISHED,this.onDetectFinished)},getInitialState:function(){return{status:null}},componentDidMount:function(){this.updateStatus()},onStatusReceived:function(e){this.setState({status:e})},onDetectStarted:function(e){this.setProtocolDetectState(e.v6,!0)},onDetectFinished:function(e){this.setProtocolDetectState(e.v6,!1),this.updateStatus()},setProtocolDetectState:function(e,t){var n="detecting"+(e?"V6":"V4");this.setState(u({},n,t))},updateStatus:function(){d["default"].get(p["default"].STATUS_URL).then(this.onStatusReceived)["catch"](function(e){return console.error("Failed to get status: "+e)})},handleDetect:function(){d["default"].post(p["default"].DETECT_URL).then(this.onSettingsReceived)["catch"](function(e){return console.error("Failed to start detection: "+e)})},render:function(){var e=this.state.status;return e?i["default"].createElement("div",{className:"ui segment detect-panel"},i["default"].createElement("h3",{className:"header"},"Current auto detection status"),i["default"].createElement("div",{className:"ui grid two column detect-grid"},i["default"].createElement(I,{title:"IPv4 connectivity",status:e.status_v4,running:this.state.detectingV4}),i["default"].createElement(I,{title:"IPv6 connectivity",status:e.status_v6,running:this.state.detectingV6})),S["default"].hasAccess(N["default"].SETTINGS_EDIT)?i["default"].createElement(f["default"],{className:"detect-button",caption:"Detect now",icon:"gray configure",disabled:!e.status_v4.auto_detect&&!e.status_v6.auto_detect,loading:this.state.detectingV6||this.state.detectingV4,onClick:this.handleDetect}):null):i["default"].createElement(m["default"],{text:"Loading detection status"})}});t["default"]=y},510:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=a(u),i=n(509),c=a(i),d=n(14),l=a(d),r=o["default"].createClass({displayName:"DetectionPage",mixins:[(0,l["default"])()],render:function(){return o["default"].createElement("div",{className:"detection-settings"},o["default"].createElement(c["default"],null))}});t["default"]=r},511:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=a(u),i=n(19),c=a(i),d=n(14),l=a(d),r=n(8),s=a(r),f={always_ccpm:s["default"].Bool,tls_mode:s["default"].Num},_=o["default"].createClass({displayName:"Encryption",mixins:[(0,l["default"])("form")],render:function(){return o["default"].createElement("div",{className:"encryption-settings"},o["default"].createElement(c["default"],{ref:"form",formItems:f}))}});t["default"]=_},512:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=a(u),i=n(266),c=a(i),d=n(14),l=a(d),r=n(8),s=a(r),f={connection_auto_v4:s["default"].Boolean,connection_bind_v4:s["default"].Str,connection_mode_v4:s["default"].Num,connection_ip_v4:s["default"].maybe(s["default"].Str),connection_update_ip_v4:s["default"].Boolean,connection_ip_override_v4:s["default"].Boolean},_=o["default"].createClass({displayName:"IPv4",mixins:[(0,l["default"])("form")],render:function(){return o["default"].createElement("div",{className:"v4-settings"},o["default"].createElement(c["default"],{ref:"form",formItems:f,protocol:"v4"}))}});t["default"]=_},513:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=a(u),i=n(266),c=a(i),d=n(14),l=a(d),r=n(8),s=a(r),f={connection_auto_v6:s["default"].Boolean,connection_bind_v6:s["default"].Str,connection_mode_v6:s["default"].Num,connection_ip_v6:s["default"].maybe(s["default"].Str),connection_update_ip_v6:s["default"].Boolean,connection_ip_override_v6:s["default"].Boolean},_=o["default"].createClass({displayName:"IPv6",mixins:[(0,l["default"])("form")],render:function(){return o["default"].createElement("div",{className:"v6-settings"},o["default"].createElement(c["default"],{ref:"form",formItems:f,protocol:"v6"}))}});t["default"]=_},514:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=a(u),i=n(19),c=a(i),d=n(14),l=a(d),r=n(8),s=a(r),f={tcp_port:s["default"].Range(1,65535),udp_port:s["default"].Range(1,65535),tls_port:s["default"].Range(1,65535),preferred_port_mapper:s["default"].Str},_=o["default"].createClass({displayName:"PortsPage",mixins:[(0,l["default"])("form")],render:function(){return o["default"].createElement("div",{className:"ports-settings"},o["default"].createElement(c["default"],{ref:"form",formItems:f}))}});t["default"]=_}});
//# sourceMappingURL=settings-connectivity-children.chunk.js.map