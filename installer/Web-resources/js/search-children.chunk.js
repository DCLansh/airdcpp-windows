webpackJsonp([9],{61:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="share/v0";t["default"]={MODULE_URL:a,DUPE_PATHS_URL:a+"/find_dupe_paths",GROUPED_ROOTS_GET_URL:a+"/grouped_root_paths",STATS_URL:a+"/stats",REFRESH_URL:a+"/refresh",REFRESH_PATHS_URL:a+"/refresh/paths"}},153:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var o=a(1),s=n(o),d=a(83),i=n(d),u=a(60),c=n(u),f=a(61),h=n(f),p=a(95),m=n(p),v=a(162),y=n(v),_=a(18),E=n(_),g=a(144),P=n(g),w=a(6),D=n(w),T=a(23),R=a(85),N=n(R),O=a(154),L=n(O),H=a(155),I=a(49),S=n(I),b=a(128),U=n(b),k=a(31),M=n(k),A=a(5),C=n(A),F=a(9),j=n(F),x=a(82),q=n(x);a(214);var G=function(e){var t=e.active,a=e.list,n=e.title,r=e.onClick;return s["default"].createElement("a",{className:"item "+(t?"active":""),onClick:r},n,a?s["default"].createElement("div",{className:"ui small right label"}," ",a.length," "):null)},W=function(e){var t=e.menuItems,a=e.section;return s["default"].createElement("div",{className:"ui grid normal layout"},s["default"].createElement("div",{className:"four wide column"},s["default"].createElement("div",{className:"ui vertical fluid tabular menu"},t)),s["default"].createElement("div",{className:"twelve wide stretched column"},s["default"].createElement("div",{className:"ui segment main-content"},a.component)))},B=function(e){var t=e.menuItems,a=e.section;return s["default"].createElement("div",{className:"mobile layout"},s["default"].createElement(q["default"],{className:"selection fluid",caption:a.name},t),s["default"].createElement("div",{className:"ui segment main-content"},a.component))},J=s["default"].createClass({displayName:"DownloadDialog",mixins:[T.RouteContext,N["default"]],propTypes:{downloadHandler:s["default"].PropTypes.func,itemInfo:s["default"].PropTypes.shape({path:s["default"].PropTypes.string,dupe:s["default"].PropTypes.number,name:s["default"].PropTypes.string,type:s["default"].PropTypes.object})},getInitialState:function(){return{active:"history",share_paths:[],dupe_paths:[],favorite_paths:[],history_paths:[]}},fetchPaths:function(e,t){var a=this;D["default"].get(e).then(function(e){return a.setState(r({},t,e))})["catch"](function(t){return console.error("Failed to fetch paths",e,t.message)})},fetchDupePaths:function(e){var t=this,a=this.props.itemInfo,n={};U["default"].isDirectory(a.path)?n.path=a.path:n.tth=a.tth,D["default"].post(e,n).then(function(e){return t.setState({dupe_paths:t.state.dupe_paths.concat(e.map(function(e){return U["default"].getParentPath(e,U["default"])}))})})["catch"](function(t){return console.error("Failed to fetch dupe paths",e,t.message)})},componentDidMount:function(){this.fetchPaths(h["default"].GROUPED_ROOTS_GET_URL,"share_paths"),this.fetchPaths(y["default"].DIRECTORIES_URL,"favorite_paths"),this.fetchPaths(m["default"].ITEMS_URL+"/"+p.HistoryEnum.DOWNLOAD_DIR,"history_paths");var e=this.props.itemInfo,t=S["default"].dupeToStringType(e.dupe);t.indexOf("queue")>-1&&this.fetchDupePaths(c["default"].DUPE_PATHS_URL),t.indexOf("share")>-1&&this.fetchDupePaths(h["default"].DUPE_PATHS_URL)},handleDownload:function(e){this.props.downloadHandler({target_name:this.props.itemInfo.name,target_directory:e,target_type:0,priority:u.PriorityEnum.DEFAULT}),P["default"].add(p.HistoryEnum.DOWNLOAD_DIR,e),this.refs.modal.hide()},getMenuItem:function(e){var t=this;return s["default"].createElement(G,{key:e.key,title:e.name,onClick:function(){return t.setState({active:e.key})},active:this.state.active===e.key,list:e.list})},render:function(){var e=this,t=[{name:"Previous",key:"history",list:this.state.history_paths,component:s["default"].createElement(H.PathList,{paths:this.state.history_paths,downloadHandler:this.handleDownload})},{name:"Shared",key:"shared",list:this.state.share_paths,component:s["default"].createElement(H.AccordionTargets,{groupedPaths:this.state.share_paths,downloadHandler:this.handleDownload})},{name:"Favorites",key:"favorites",list:this.state.favorite_paths,component:s["default"].createElement(H.AccordionTargets,{groupedPaths:this.state.favorite_paths,downloadHandler:this.handleDownload})},{name:"Dupes",key:"dupes",list:this.state.dupe_paths,component:s["default"].createElement(H.PathList,{paths:this.state.dupe_paths,downloadHandler:this.handleDownload})}];j["default"].hasAccess(C["default"].FILESYSTEM_VIEW)&&t.push({name:"Browse",key:"browse",component:s["default"].createElement(L["default"],{history:this.state.history_paths,downloadHandler:this.handleDownload})});var a=t.find(function(t){return t.key===e.state.active}),n=t.map(this.getMenuItem),r=M["default"].useMobileLayout()?B:W;return s["default"].createElement(i["default"],l({ref:"modal",className:"download-dialog",title:"Download",closable:!0,icon:E["default"].DOWNLOAD,fullHeight:!0},this.props),s["default"].createElement(r,{menuItems:n,section:a}))}});t["default"]=J},154:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=n(r),o=a(156),s=n(o),d=l["default"].createClass({displayName:"DownloadFileBrowser",handleDownload:function(e){this.refs.modal.hide()},onDirectoryChanged:function(e){this.setState({currentPath:e})},getInitialState:function(){return{currentPath:this.getInitialPath()}},selectedNameFormatter:function(e,t){var a=this;if(0===t.length)return e;var n=l["default"].createElement("div",{className:"download-handler",onClick:function(){return a.props.downloadHandler(a.state.currentPath)}},l["default"].createElement("i",{className:"green download link icon"}),l["default"].createElement("a",null,e));return n},getInitialPath:function(){var e=this.props.history;return e.length>0?e[e.length-1]:""},render:function(){return l["default"].createElement(s["default"],{initialPath:this.getInitialPath(),selectedNameFormatter:this.selectedNameFormatter,onDirectoryChanged:this.onDirectoryChanged})}});t["default"]=d},155:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AccordionTargets=t.PathList=void 0;var r=a(1),l=n(r),o=a(116),s=n(o),d=a(17),i=n(d),u=function(){return l["default"].createElement(i["default"],{title:"No paths to display"})},c=function(e){var t=e.path,a=e.downloadHandler;return l["default"].createElement("div",{className:"item"},l["default"].createElement("i",{className:"yellow folder icon"}),l["default"].createElement("div",{className:"content"},l["default"].createElement("a",{onClick:function(e){return a(t)}},t)))},f=function(e){var t=e.downloadHandler,a=e.paths;return 0===a.length?l["default"].createElement(u,null):l["default"].createElement("div",{className:"ui relaxed list"},a.map(function(e){return l["default"].createElement(c,{key:e,path:e,downloadHandler:t})}))};f.PropTypes={downloadHandler:l["default"].PropTypes.func.isRequired,paths:l["default"].PropTypes.array.isRequired};var h=l["default"].createClass({displayName:"AccordionTargets",propTypes:{downloadHandler:l["default"].PropTypes.func.isRequired,groupedPaths:l["default"].PropTypes.array.isRequired},formatParent:function(e){return l["default"].createElement("div",{key:e.name},l["default"].createElement("div",{className:"title"},l["default"].createElement("i",{className:"dropdown icon"}),e.name),l["default"].createElement("div",{className:"content"},l["default"].createElement(f,{paths:e.paths,downloadHandler:this.props.downloadHandler})))},render:function(){var e=this.props.groupedPaths;return 0===e.length?l["default"].createElement(u,null):l["default"].createElement(s["default"],{className:"styled download-targets"},this.props.groupedPaths.map(this.formatParent))}});t.PathList=f,t.AccordionTargets=h},162:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="favorite_directories/v0";t["default"]={MODULE_URL:a,DIRECTORIES_URL:a+"/directories"}},179:function(e,t,a){t=e.exports=a(10)(),t.push([e.id,".download-dialog .accordion.download-targets{overflow-y:auto}.download-dialog .main-content,.download-dialog .mobile.layout{display:flex;flex-direction:column}.download-dialog .content>div,.download-dialog .main-content,.download-dialog .ui.grid .column{height:100%}.download-dialog .download-handler{display:flex}",""])},214:[830,179]});
//# sourceMappingURL=search-children.chunk.js.map