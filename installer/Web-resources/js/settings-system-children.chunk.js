webpackJsonp([20],{35:function(e,t,a){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=d["default"].pending(),a=document.createElement("div"),n=r["default"].createElement(m,s({node:a,resolver:t},e));return document.body.appendChild(a),o["default"].render(n,a),t.promise};var i=a(1),r=n(i),l=a(22),o=n(l),u=a(48),d=n(u),c=a(58),f=n(c),m=r["default"].createClass({displayName:"ConfirmDialog",propTypes:{title:r["default"].PropTypes.node.isRequired,content:r["default"].PropTypes.node.isRequired,icon:r["default"].PropTypes.string,approveCaption:r["default"].PropTypes.string,rejectCaption:r["default"].PropTypes.string,checkboxCaption:r["default"].PropTypes.node},getDefaultProps:function(){return{approveCaption:"Yes",rejectCaption:"No"}},getInitialState:function(){return{checked:!1}},componentDidMount:function(){var t={movePopup:!1,onHidden:this.onHidden,onApprove:this.onApprove,onDeny:this.onDeny,closable:!1,detachable:!1,allowMultiple:!0},a=o["default"].findDOMNode(this);e(a).modal(t).modal("show")},onDeny:function(e){this.props.resolver.reject(new Error("Denied"))},onApprove:function(e){this.props.resolver.resolve(this.state.checked)},onHidden:function(){this.props.node&&(o["default"].unmountComponentAtNode(this.props.node),document.body.removeChild(this.props.node))},onCheckboxValueChanged:function(e){this.setState({checked:e})},render:function(){return r["default"].createElement("div",{className:"ui basic modal confirm-dialog"},r["default"].createElement("div",{className:"header"},this.props.title),r["default"].createElement("div",{className:"image content"},r["default"].createElement("div",{className:"image"},r["default"].createElement("i",{className:this.props.icon+" icon"})),r["default"].createElement("div",{className:"description"},this.props.content,this.props.checkboxCaption?r["default"].createElement(f["default"],{checked:!1,onChange:this.onCheckboxValueChanged,caption:this.props.checkboxCaption}):null)),r["default"].createElement("div",{className:"actions"},r["default"].createElement("div",{className:"two fluid ui inverted buttons"},r["default"].createElement("div",{className:"ui cancel red basic inverted button"},r["default"].createElement("i",{className:"remove icon"}),this.props.rejectCaption),r["default"].createElement("div",{className:"ui ok green basic inverted button"},r["default"].createElement("i",{className:"checkmark icon"}),this.props.approveCaption))))}})}).call(t,a(21))},84:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={HOME_PAGE_URL:"https://github.com/airdcpp-web/airdcpp-webclient",SPEEDTEST_URL:"http://www.speedtest.net",LOG_HELP_URL:"http://dcplusplus.sourceforge.net/webhelp/settings_logs.html"}},164:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="web_users/v0";t["default"]={MODULE_URL:a,USERS_URL:a+"/users",USER_POST_URL:a+"/user/add",USER_UPDATE_URL:a+"/user/update",USER_DELETE_URL:a+"/user/remove",CREATED:"web_user_created",UPDATED:"web_user_updated",REMOVED:"web_user_removed"}},243:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),i=n(s),r=a(6),l=n(r),o=a(35),u=n(o),d=a(59),c=n(d),f=a(164),m=n(f),p=a(20),E=n(p),h=a(18),v=n(h),_=a(9),g=n(_),b=function(e){return e.username!==g["default"].user},y=i["default"].createActions([{create:{displayName:"Add user",icon:v["default"].CREATE}},{edit:{displayName:"Edit user",icon:v["default"].EDIT}},{remove:{asyncResult:!0,children:["confirmed"],displayName:"Remove user",filter:b,icon:v["default"].REMOVE}}]);y.create.listen(function(e){E["default"].pushModal(e,e.pathname+"/user",c["default"].WEB_USER_MODAL_ID)}),y.edit.listen(function(e,t){E["default"].pushModal(t,t.pathname+"/user",c["default"].WEB_USER_MODAL_ID,{user:e})}),y.remove.listen(function(e){var t=this,a={title:this.displayName,content:"Are you sure that you want to remove the user "+e.username+"?",icon:this.icon,approveCaption:"Remove user",rejectCaption:"Don't remove"};(0,u["default"])(a).then(function(){return t.confirmed(e)})}),y.remove.confirmed.listen(function(e){var t=this;return l["default"].post(m["default"].USER_DELETE_URL,{username:e.username}).then(y.remove.completed.bind(t,e))["catch"](y.remove.failed.bind(t,e))}),t["default"]=y},435:function(e,t,a){var n=a(609);"string"==typeof n&&(n=[[e.id,n,""]]);a(12)(n,{});n.locals&&(e.exports=n.locals)},541:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),l=a(19),o=n(l),u=a(14),d=n(u),c=a(8),f=n(c);a(435);var m=r["default"].createClass({displayName:"LogSection",mixins:[(0,d["default"])("title","content")],convertKey:function(e){return"log_"+this.props.section+(e?"_"+e:"")},getInitialState:function(){return{enabled:null}},onEnableStateReceived:function(e){this.setState({enabled:e[this.convertKey()].value})},onEnableStateChanged:function(e,t,a){this.setState({enabled:t[e]})},onContentSetting:function(e,t,a){t.disabled=!this.state.enabled},getChildClass:function(e){return this.state.enabled?e+" active":e},render:function(){var e,t=s({},this.convertKey(),f["default"].Bool),a=(e={},s(e,this.convertKey("file"),f["default"].Str),s(e,this.convertKey("format"),f["default"].Str),e);return r["default"].createElement("div",{className:this.getChildClass("log-section")},r["default"].createElement("div",{className:this.getChildClass("title")},r["default"].createElement(o["default"],{ref:"title",formItems:t,onFieldChanged:this.onEnableStateChanged,onSourceDataChanged:this.onEnableStateReceived})),r["default"].createElement("div",{className:this.getChildClass("content")},r["default"].createElement(o["default"],{ref:"content",formItems:a,onFieldSetting:this.onContentSetting})))}});t["default"]=m},542:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),i=n(s),r=a(19),l=n(r),o=a(14),u=n(o),d=a(116),c=n(d),f=a(84),m=n(f),p=a(541),E=n(p),h=a(17),v=n(h),_=a(8),g=n(_),b={log_directory:g["default"].Str},y=["main","pm","downloads","uploads","syslog","status"],S=i["default"].createClass({displayName:"LoggingPage",mixins:[u["default"].apply(void 0,["form"].concat(y))],render:function(){return i["default"].createElement("div",{className:"logging-settings"},i["default"].createElement(l["default"],{ref:"form",formItems:b}),i["default"].createElement("div",{className:"sections"},i["default"].createElement("div",{className:"ui header"},"Sections"),i["default"].createElement(v["default"],{icon:"blue info",description:i["default"].createElement("a",{href:m["default"].LOG_HELP_URL,target:"_blank"},"Variable information for Filename and Format fields")}),i["default"].createElement(c["default"],{className:"styled",controlled:!0},y.map(function(e){return i["default"].createElement(E["default"],{ref:e,section:e})}))))}});t["default"]=S},543:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),i=n(s),r=a(243),l=n(r),o=a(91),u=n(o),d=a(546),c=n(d),f=i["default"].createClass({displayName:"WebUsersPage",render:function(){return i["default"].createElement("div",{className:"web-users-settings"},i["default"].createElement("div",{className:"table-actions"},i["default"].createElement(u["default"],{action:l["default"].create,args:[this.props.location]})),i["default"].createElement(c["default"],{className:"user-layout",location:this.props.location}))}});t["default"]=f},544:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),i=n(s),r=a(75),l=n(r),o=a(8),u=n(o),d=a(58),c=n(d),f=a(17),m=n(f),p=u["default"].form.Form.templates.select.clone({renderSelect:function(e){var t=function(t,a){var n=e.value;if(a)n=(0,l["default"])(n,{$push:[t]});else{var s=n.indexOf(t);n=(0,l["default"])(n,{$splice:[[s,1]]})}e.onChange(n)},a=function(a){var n=a.value,s=a.text;return i["default"].createElement(c["default"],{key:n,className:n,checked:-1!==e.value.indexOf(n),onChange:function(e){return t(n,e)},caption:s})},n=function(t){var a=t.value;return-1!==e.value.indexOf("admin")&&"admin"!==a?!1:!0},s=e.options.filter(n).map(a);return i["default"].createElement("div",{className:"permission-select"},i["default"].createElement(m["default"],{description:"Administrator permission is required in order to access the System section in settings",className:"small"}),s)}});t["default"]=p},545:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),l=a(83),o=n(l),u=a(164),d=n(u),c=a(5),f=n(c),m=a(544),p=n(m),E=a(6),h=n(E),v=a(23),_=a(85),g=n(_),b=a(8),y=n(b),S=a(92),w=n(S),C=a(102),N=n(C),D=a(9),I=n(D);a(435);var T={ADMIN:"Administrator",SEARCH:"Search",DOWNLOAD:"Download",EVENTS:"Events: View",QUEUE_VIEW:"Queue: View",QUEUE_EDIT:"Queue: Modify",FAVORITE_HUBS_VIEW:"Favorite hubs: View",FAVORITE_HUBS_EDIT:"Favorite hubs: Modify",SETTINGS_VIEW:"Settings: View",SETTINGS_EDIT:"Settings: Edit",FILESYSTEM_VIEW:"Local filesystem: Browse",FILESYSTEM_EDIT:"Local filesystem: Edit",HUBS_VIEW:"Hubs: View",HUBS_EDIT:"Hubs: Modify",HUBS_SEND:"Hubs: Send messages",PRIVATE_CHAT_VIEW:"Private chat: View",PRIVATE_CHAT_EDIT:"Private chat: Modify",PRIVATE_CHAT_SEND:"Private chat: Send messages",FILELISTS_VIEW:"Filelists: View",FILELISTS_EDIT:"Filelists: Modify",VIEW_FILE_VIEW:"Viewed files: View",VIEW_FILE_EDIT:"Viewed files: Modify"},M=function(e,t){return e.push({value:f["default"][t],text:T[t]}),e},O={username:y["default"].Str,password:y["default"].Str,permissions:y["default"].list(y["default"].String)},P=r["default"].createClass({displayName:"WebUserDialog",mixins:[v.RouteContext,g["default"]],getInitialState:function(){return this._isNew=!this.props.user,{sourceData:N["default"].valueMapToInfo(this.props.user,Object.keys(O)),virtualNames:[]}},save:function(){return this.refs.form.save()},onSave:function(e){return this._isNew?h["default"].post(d["default"].USER_POST_URL,e):h["default"].post(d["default"].USER_UPDATE_URL,Object.assign(e,{username:this.props.user.username}))},onFieldSetting:function(e,t,a){"permissions"===e?(t.factory=y["default"].form.Select,t.template=p["default"],t.options=Object.keys(f["default"]).reduce(M,[]),t.disabled=!this._isNew&&this.props.user.username===I["default"].user):"password"===e?(t.type="password",this._isNew||(t.label="New password (optional)")):"username"===e&&(t.disabled=!this._isNew)},render:function(){var e=this._isNew?"Add web user":"Edit user "+this.props.user.username,t={location:this.props.location},a=O;return this._isNew||(a=Object.assign({},O,{password:y["default"].maybe(y["default"].Str)})),r["default"].createElement(o["default"],s({className:"web-user",title:e,onApprove:this.save,closable:!1,icon:"user"},this.props),r["default"].createElement(w["default"],{ref:"form",formItems:a,onFieldChanged:this.onFieldChanged,onFieldSetting:this.onFieldSetting,onSave:this.onSave,sourceData:this.state.sourceData,context:t}))}});t["default"]=P},546:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionsCell=void 0;var s=a(1),i=n(s),r=a(243),l=n(r),o=a(590),u=n(o),d=a(70),c=n(d),f=a(69),m=a(52),p=a(5),E=n(p),h=t.PermissionsCell=function(e){var t=e.cellData;return i["default"].createElement("span",{className:"plain permissions cell"},-1!==t.indexOf(E["default"].ADMIN)?"Administrator":t.length)},v=i["default"].createClass({displayName:"WebUserLayout",render:function(){return i["default"].createElement(c["default"],{store:u["default"]},i["default"].createElement(m.Column,{name:"Username",width:200,columnKey:"username",cell:i["default"].createElement(f.ActionCell,{location:this.props.location,actions:l["default"],ids:["edit","remove"]}),flexGrow:10}),i["default"].createElement(m.Column,{name:"Permissions",width:80,columnKey:"permissions",flexGrow:2,cell:i["default"].createElement(h,null)}),i["default"].createElement(m.Column,{name:"Active sessions",width:80,flexGrow:1,columnKey:"active_sessions"}),i["default"].createElement(m.Column,{name:"Last logged in",width:80,flexGrow:3,columnKey:"last_login",cell:i["default"].createElement(f.DurationCell,null)}))}});t["default"]=v},590:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),i=n(s),r=a(72),l=n(r),o=a(164),u=n(o);t["default"]=i["default"].createStore({_viewName:"web_user_view",_apiUrl:u["default"].MODULE_URL,mixins:[(0,l["default"])("username")]})},609:function(e,t,a){t=e.exports=a(10)(),t.push([e.id,".web-user.modal .ui.checkbox{width:100%;margin-top:5px}.web-user.modal .ui.checkbox.admin{margin-bottom:10px;font-weight:700}.logging-settings .log-section.active{background-color:#f5f5f5}.logging-settings .field-log_directory{margin-bottom:25px!important}",""])}});
//# sourceMappingURL=settings-system-children.chunk.js.map